(this.webpackJsonpreadit=this.webpackJsonpreadit||[]).push([[0],{32:function(e,t,s){},33:function(e,t,s){},38:function(e,t,s){},39:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},50:function(e,t,s){},51:function(e,t,s){},52:function(e,t,s){},53:function(e,t,s){},54:function(e,t,s){},55:function(e,t,s){},56:function(e,t,s){"use strict";s.r(t);s(32),s(33);var n=s(2),r=s.n(n),c=s(29),a=s.n(c),o=s(5),i=(s(38),s(39),s.p+"static/media/alien.3afe0b15.png"),l=s(4),u=(s(25),s(17),s(7)),d=s(1),m=function(e){var t=Object(n.useState)({names:[]}),s=Object(o.a)(t,2),r=s[0],c=s[1];return Object(n.useEffect)((function(){l.a.firestore().collection("groups").get().then((function(t){if(e.userRef)c({names:e.userRef.groups});else{var s=[];t.forEach((function(e){s.push(e.id)})),c({names:s})}}))}),[e.user,e.userRef]),Object(d.jsxs)("div",{className:"header",children:[Object(d.jsxs)("div",{className:"group-list",children:[Object(d.jsx)("span",{className:"my-groups",children:"MY GROUPS: "}),Object(d.jsxs)("div",{className:"groups",children:[Object(d.jsx)(u.b,{to:"/groups/all",children:"ALL"}),r.names.map((function(e){return Object(d.jsx)(u.b,{to:"/groups/".concat(e),children:e.toUpperCase()},"header".concat(e))}))]}),Object(d.jsx)(u.b,{className:"more-groups",to:"/groups",children:"MORE>>"})]}),Object(d.jsxs)("div",{className:"header-main",children:[Object(d.jsxs)(u.b,{className:"page-title",to:"/",children:[Object(d.jsx)("img",{className:"logo",alt:"logo",src:i}),"readit"]}),Object(d.jsxs)("div",{className:"buttons",children:[!e.user&&Object(d.jsx)(u.b,{to:"/login",children:Object(d.jsx)("button",{className:"login-btn btn",children:"Login"})}),e.user&&Object(d.jsx)(u.b,{className:"user-name",to:"/user/".concat(e.user.displayName),children:e.user.displayName}),e.user&&Object(d.jsx)(u.b,{to:"/",children:Object(d.jsx)("button",{onClick:function(){l.a.auth().signOut().then((function(){e.setUser(null),window.location.reload()}))},className:"log-out-btn btn",children:"Log out"})}),!e.user&&Object(d.jsx)(u.b,{to:"/signup",children:Object(d.jsx)("button",{className:"sign-up-btn btn",children:"Sign up"})})]})]})]})},j=(s(47),s(8)),f=function(e){if(e.user)return Object(d.jsx)(j.a,{to:"/"});return Object(d.jsxs)("form",{className:"login-form",onSubmit:function(t){t.preventDefault();var s=t.target;l.a.auth().setPersistence(l.a.auth.Auth.Persistence.SESSION).then((function(){l.a.auth().signInWithEmailAndPassword(s[0].value,s[1].value).then((function(t){e.setUser(t.user)})).catch((function(e){s.querySelector(".warning").textContent=e.message}))})).catch((function(e){console.log(e)}))},children:[Object(d.jsx)("p",{className:"warning"}),Object(d.jsx)("label",{children:"Email"}),Object(d.jsx)("input",{name:"email",type:"email",required:!0}),Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{name:"password",type:"password",required:!0}),Object(d.jsx)("button",{className:"btn",type:"submit",children:"Login"})]})},b=(s(48),function(e,t){return{displayName:e,email:t,groups:[],likes:[],hates:[]}}),p=function(e){if(e.user)return Object(d.jsx)(j.a,{to:"/"});var t;return Object(d.jsxs)("form",{className:"sign-up-form",onSubmit:function(s){s.preventDefault();var n=s.target,r=n[0].value,c=n[1].value,a=n[2].value;(function(e){var t=[];return l.a.firestore().collection("users").get().then((function(e){e.docs.forEach((function(e){t.push(e.data().displayName.toLowerCase())}))})).then((function(){return!t.includes(e)}))})(r.toLowerCase()).then((function(s){s?l.a.auth().createUserWithEmailAndPassword(c,a).then((function(s){(t=s.user).updateProfile({displayName:r}).then((function(){e.setUser(t)}))})).catch((function(e){n.querySelector(".warning").textContent=e.message})).then((function(){var t=b(r,c);e.setUserRef(t),l.a.firestore().collection("users").doc(r).set(t)})).then((function(){l.a.auth().setPersistence(l.a.auth.Auth.Persistence.SESSION)})).catch((function(e){console.log(e)})):n.querySelector(".warning").textContent="User name already exists"}))},children:[Object(d.jsx)("p",{className:"warning"}),Object(d.jsx)("label",{children:"Display Name"}),Object(d.jsx)("input",{onChange:function(e){var t=document.querySelector(".warning"),s=document.querySelector(".submit-btn");e.target.value.includes(" ")?(t.textContent="Username cannot contain spaces",s.disabled=!0):(t.textContent="",s.disabled=!1)},name:"displayName",type:"text",required:!0}),Object(d.jsx)("label",{children:"Email"}),Object(d.jsx)("input",{name:"email",type:"email",required:!0}),Object(d.jsx)("label",{children:"Password"}),Object(d.jsx)("input",{name:"password",type:"password",minLength:"6",required:!0}),Object(d.jsx)("button",{className:"submit-btn btn",type:"submit",children:"Create Account"})]})},O=s(18),h=s(14),g=(s(49),s(57),s(50),s.p+"static/media/up-arrow.ce2a961f.png"),x=s.p+"static/media/up-arrow-liked.1a60e50e.png",N=s.p+"static/media/down-arrow.5b3d4053.png",v=s.p+"static/media/down-arrow-hate.05414a6f.png",R=function(e){return e>26298e5?"".concat(Math.floor(e/26298e5)," months ago"):e>864e5?"".concat(Math.floor(e/864e5)," day(s) ago"):e>36e5?"".concat(Math.floor(e/36e5)," hrs ago"):e>6e4?"".concat(Math.floor(e/6e4)," min ago"):"Just now"},y=(s(51),function(e){var t=Object(n.useState)(e.comment.likes),s=Object(o.a)(t,2),r=s[0],c=s[1],a=Object(n.useState)(!1),i=Object(o.a)(a,2),m=i[0],j=i[1],f=Object(n.useState)(!1),b=Object(o.a)(f,2),p=b[0],O=b[1],h=(new Date).getTime();return Object(n.useEffect)((function(){e.userRef&&(j(e.userRef.likes.includes(e.id)),O(e.userRef.hates.includes(e.id)))}),[e.userRef,e.id]),Object(d.jsxs)("div",{"data-id":e.id,className:"comment",children:[Object(d.jsxs)("div",{className:"left-margin",children:[Object(d.jsx)("button",{onClick:function(){if(e.userRef&&!e.userRef.likes.includes(e.id)){var t=JSON.parse(JSON.stringify(e.allComments[e.id]));t.likes=r+1,l.a.firestore().collection("comments").doc(e.id).set(t),c(r+1);var s=JSON.parse(JSON.stringify(e.allComments));s[e.id]=t,e.setAllComments(s);var n=JSON.parse(JSON.stringify(e.userRef));n.likes.push(e.id),n.hates.includes(e.id)&&(n.hates=n.hates.filter((function(t){return t!==e.id}))),e.setUserRef(n),l.a.firestore().collection("users").doc(e.userRef.displayName).set(n),j(!0),O(!1),e.setCommentPoints&&e.setCommentPoints(e.commentPoints+1)}},className:"upVoteBtn vote-btn",children:m&&Object(d.jsx)("img",{className:"up-arrow-img",src:x,alt:"orange-up-arrow"})||Object(d.jsx)("img",{className:"up-arrow-img",src:g,alt:"up-arrow"})}),r,Object(d.jsx)("button",{onClick:function(){if(e.userRef&&!e.userRef.hates.includes(e.id)){var t=JSON.parse(JSON.stringify(e.allComments[e.id]));t.likes=r-1,l.a.firestore().collection("comments").doc(e.id).set(t),c(r-1);var s=JSON.parse(JSON.stringify(e.allComments));s[e.id]=t,e.setAllComments(s);var n=JSON.parse(JSON.stringify(e.userRef));n.hates.push(e.id),n.likes.includes(e.id)&&(n.likes=n.likes.filter((function(t){return t!==e.id}))),e.setUserRef(n),l.a.firestore().collection("users").doc(e.userRef.displayName).set(n),O(!0),j(!1),e.setCommentPoints&&e.setCommentPoints(e.commentPoints-1)}},className:"down-vote-button vote-btn",children:p&&Object(d.jsx)("img",{className:"down-arrow-img",src:v,alt:"blue-down-arrow"})||Object(d.jsx)("img",{className:"down-arrow-img",src:N,alt:"down-arrow"})})]}),Object(d.jsxs)("div",{className:"comment-content",children:[Object(d.jsxs)("div",{className:"comment-header",children:["Posted by: ",Object(d.jsx)(u.b,{to:"/user/".concat(e.comment.user),children:e.comment.user})," - ".concat(R(h-e.comment.timestamp))]}),Object(d.jsx)("div",{className:"comment-body",children:e.comment.content})]})]})}),S=function(e,t,s){return{content:t,likes:0,timestamp:(new Date).getTime(),user:e,post:s}},C=function(e){var t=Object(n.useState)({}),s=Object(o.a)(t,2),r=s[0],c=s[1],a=Object(n.useState)(e.post.likes),i=Object(o.a)(a,2),m=i[0],j=i[1],f=Object(n.useState)(!1),b=Object(o.a)(f,2),p=b[0],C=b[1],P=Object(n.useState)(!1),k=Object(o.a)(P,2),w=k[0],J=k[1],A=Object(n.useState)(!1),U=Object(o.a)(A,2),E=U[0],q=U[1],G=(new Date).getTime();return Object(n.useEffect)((function(){Object.keys(e.allComments).forEach((function(t){e.allComments[t].post===e.id&&c((function(s){return Object(h.a)(Object(h.a)({},s),{},Object(O.a)({},t,e.allComments[t]))}))})),e.userRef&&(C(e.userRef.likes.includes(e.id)),J(e.userRef.hates.includes(e.id)))}),[e.id,e.userRef,e.allComments]),Object(d.jsxs)("div",{"data-id":e.id,className:"post",children:[Object(d.jsxs)("div",{className:"left-margin",children:[Object(d.jsx)("button",{onClick:function(){if(e.userRef&&!e.userRef.likes.includes(e.id)){var t=JSON.parse(JSON.stringify(e.allPosts[e.id]));t.likes=m+1,l.a.firestore().collection("posts").doc(e.id).set(t),j(m+1);var s=JSON.parse(JSON.stringify(e.allPosts));s[e.id]=t,e.setAllPosts(s);var n=JSON.parse(JSON.stringify(e.userRef));n.likes.push(e.id),n.hates.includes(e.id)&&(n.hates=n.hates.filter((function(t){return t!==e.id}))),l.a.firestore().collection("users").doc(e.userRef.displayName).set(n),C(!0),J(!1),e.setUserRef(n),e.setPostPoints&&e.setPostPoints(e.postPoints+1)}},className:"upVoteBtn vote-btn",children:p&&Object(d.jsx)("img",{className:"up-arrow-img",src:x,alt:"orange-up-arrow"})||Object(d.jsx)("img",{className:"up-arrow-img",src:g,alt:"up-arrow"})}),m,Object(d.jsx)("button",{onClick:function(){if(e.userRef&&!e.userRef.hates.includes(e.id)){var t=JSON.parse(JSON.stringify(e.allPosts[e.id]));t.likes=m-1,l.a.firestore().collection("posts").doc(e.id).set(t),j(m-1);var s=JSON.parse(JSON.stringify(e.allPosts));s[e.id]=t,e.setAllPosts(s);var n=JSON.parse(JSON.stringify(e.userRef));n.hates.push(e.id),n.likes.includes(e.id)&&(n.likes=n.likes.filter((function(t){return t!==e.id}))),e.setUserRef(n),l.a.firestore().collection("users").doc(e.userRef.displayName).set(n),J(!0),C(!1),e.setUserRef(n),e.setPostPoints&&e.setPostPoints(e.postPoints-1)}},className:"down-vote-button vote-btn",children:w&&Object(d.jsx)("img",{className:"down-arrow-img",src:v,alt:"blue-down-arrow"})||Object(d.jsx)("img",{className:"down-arrow-img",src:N,alt:"down-arrow"})})]}),Object(d.jsxs)("div",{className:"post-content",children:[Object(d.jsxs)("div",{className:"post-header",children:["Posted by: ",Object(d.jsx)(u.b,{to:"/user/".concat(e.post.user),children:e.post.user})," - ".concat(R(G-e.post.timestamp)," - in "),Object(d.jsx)(u.b,{to:"/groups/".concat(e.post.group),children:e.post.group})]}),Object(d.jsx)("div",{className:"post-title",children:e.post.title}),Object(d.jsxs)("div",{className:"post-body",children:[e.post.content,e.post.image&&Object(d.jsx)("a",{href:e.post.image,target:"_blank",rel:"noreferrer",children:Object(d.jsx)("img",{className:"post-img",src:e.post.image,alt:e.post.title})})]}),Object(d.jsx)("div",{className:"post-footer",children:Object(d.jsxs)("button",{onClick:function(){q(!E)},children:[Object.keys(r).length," comments"]})}),E&&e.userRef&&Object(d.jsx)("div",{className:"comments",children:Object(d.jsxs)("form",{className:"comment-form",onSubmit:function(t){t.preventDefault();var s,n=t.target,r=S(e.userRef.displayName,n[0].value,e.id);t.target.children[0].value="",l.a.firestore().collection("comments").add(r).then((function(e){s=e.id})).then((function(){e.setAllComments((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},s,r))}))}))},children:[Object(d.jsx)("textarea",{required:!0,placeholder:"Your thoughts..."}),Object(d.jsx)("button",{className:"submit-comment",children:"Save"})]})}),E&&Object.keys(r).map((function(t){return Object(d.jsx)(y,{comment:r[t],id:t,userRef:e.userRef,setUserRef:e.setUserRef,allComments:e.allComments,setAllComments:e.setAllComments,setCommentPoints:e.setCommentPoints},t)}))]})]})},P=function(e,t,s,n,r){return{content:s,group:n,likes:0,timestamp:(new Date).getTime(),title:t,user:e,image:r}},k=function(e){var t=Object(n.useState)({}),s=Object(o.a)(t,2),r=s[0],c=s[1],a=Object(n.useState)({}),i=Object(o.a)(a,2),m=i[0],j=i[1],f=Object(n.useState)(!1),b=Object(o.a)(f,2),p=b[0],g=b[1],x=Object(n.useState)(!1),N=Object(o.a)(x,2),v=N[0],R=N[1];return Object(n.useEffect)((function(){var t={};if(e.group?"all"===e.group?t=JSON.parse(JSON.stringify(e.allPosts)):Object.keys(e.allPosts).forEach((function(s){e.allPosts[s].group===e.group&&(t[s]=e.allPosts[s])})):e.userRef?Object.keys(e.allPosts).forEach((function(s){e.userRef.groups.includes(e.allPosts[s].group)&&(t[s]=e.allPosts[s])})):t=JSON.parse(JSON.stringify(e.allPosts)),Object.keys(t).length<1&&!e.group){var s=P("Readit","Join more groups to add to your feed",Object(d.jsx)(u.b,{to:"/groups",children:"Join Groups"}),"Feed");t.join=s}else if(Object.keys(t).length<1&&e.group){var n=P("Readit","Be the first to post here"," ",e.group);t.first=n}c(t)}),[e.allPosts,e.group,e.userRef]),Object(n.useEffect)((function(){j(e.allGroups)}),[e.allGroups]),Object(d.jsxs)("div",{className:"container",children:[Object(d.jsx)("div",{className:"feed",children:Object.keys(r).map((function(t){return Object(d.jsx)(C,{post:r[t],id:t,userRef:e.userRef,setUserRef:e.setUserRef,allPosts:e.allPosts,setAllPosts:e.setAllPosts,allComments:e.allComments,setAllComments:e.setAllComments},t)}))}),Object(d.jsxs)("div",{className:"right-column",children:[e.userRef&&Object(d.jsx)("button",{onClick:function(){g(!0)},className:"add-post-btn",children:"Submit new text post"}),e.userRef&&Object(d.jsx)("button",{onClick:function(){R(!0)},className:"add-post-btn",children:"Submit new image post"})]}),p&&Object(d.jsxs)("form",{className:"post-form",onSubmit:function(t){t.preventDefault(),g(!1);var s,n=t.target,r=P(e.userRef.displayName,n[0].value,n[1].value,n[2].value,null);l.a.firestore().collection("posts").add(r).then((function(e){s=e.id})).then((function(){e.setAllPosts((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},s,r))}))}))},children:[Object(d.jsx)("input",{required:!0,placeholder:"Enter your title"}),Object(d.jsx)("textarea",{required:!0,className:"content",placeholder:"Enter your content"}),Object(d.jsxs)("select",{required:!0,name:"groups",children:[Object(d.jsx)("option",{value:"",children:"--Choose a group"}),(!e.group||"all"===e.group)&&Object.keys(m).map((function(e){return Object(d.jsx)("option",{value:e,children:e},e)}))||Object(d.jsx)("option",{value:e.group,children:e.group})]}),Object(d.jsx)("button",{children:"Submit"}),Object(d.jsx)("button",{className:"close-form",onClick:function(){g(!1)},children:"x"})]}),v&&Object(d.jsxs)("form",{className:"post-form",onSubmit:function(t){t.preventDefault(),R(!1);var s=t.target,n=l.a.storage().ref().child(s[1].files[0].name);n.put(s[1].files[0]).then((function(){n.getDownloadURL().then((function(t){var n,r=P(e.userRef.displayName,s[0].value,null,s[2].value,t);l.a.firestore().collection("posts").add(r).then((function(e){n=e.id})).then((function(){e.setAllPosts((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},n,r))}))}))}))}))},children:[Object(d.jsx)("input",{required:!0,placeholder:"Enter your title"}),Object(d.jsxs)("div",{className:"file-uploader",children:[Object(d.jsx)("input",{onChange:function(e){e.target.files[0].size>2e6?(document.querySelector(".file-uploader").style="border: 1px solid red; color: red;",document.querySelector(".pic-submit-btn").disabled=!0):(document.querySelector(".file-uploader").style="border: none; color: black;",document.querySelector(".pic-submit-btn").disabled=!1)},type:"file",accept:".png, .jpeg, .jpg, .gif"}),"Max size: 2MB"]}),Object(d.jsxs)("select",{required:!0,name:"groups",children:[Object(d.jsx)("option",{value:"",children:"--Choose a group"}),(!e.group||"all"===e.group)&&Object.keys(m).map((function(e){return Object(d.jsx)("option",{value:e,children:e},e)}))||Object(d.jsx)("option",{value:e.group,children:e.group})]}),Object(d.jsx)("button",{className:"pic-submit-btn",children:"Submit"}),Object(d.jsx)("button",{className:"close-form",onClick:function(){R(!1)},children:"x"})]})]})},w=(s(52),s.p+"static/media/404.a0396b78.png"),J=function(e){var t=Object(n.useState)(!0),s=Object(o.a)(t,2),r=s[0],c=s[1],a=Object(n.useState)({}),i=Object(o.a)(a,2),u=i[0],m=i[1],f=Object(n.useState)({}),b=Object(o.a)(f,2),p=b[0],O=b[1],h=Object(n.useState)(0),g=Object(o.a)(h,2),x=g[0],N=g[1],v=Object(n.useState)(0),R=Object(o.a)(v,2),S=R[0],P=R[1],k=Object(j.g)().name,J=Object(d.jsxs)("div",{children:[Object(d.jsxs)("div",{className:"user",children:[Object(d.jsx)("div",{className:"image-placeholder"}),Object(d.jsx)("p",{className:"user-name",children:k}),Object(d.jsxs)("p",{className:"post-points",children:["Post points: ",x]}),Object(d.jsxs)("p",{className:"comment-points",children:["Comment points: ",S]})]}),Object(d.jsxs)("div",{className:"feed",children:[Object(d.jsx)("div",{children:"Posts:"}),Object.keys(u).map((function(t){return Object(d.jsx)(C,{post:u[t],id:t,allPosts:e.allPosts,setAllPosts:e.setAllPosts,allComments:e.allComments,setAllComments:e.setAllComments,userRef:e.userRef,setUserRef:e.setUserRef,postPoints:x,setPostPoints:N},t)})),"Comments:",Object.keys(p).map((function(t){return Object(d.jsx)(y,{comment:p[t],id:t,userRef:e.userRef,setUserRef:e.setUserRef,allComments:e.allComments,setAllComments:e.setAllComments,commentPoints:S,setCommentPoints:P},t)}))]})]});return l.a.firestore().collection("users").doc(k).get().then((function(e){c(!!e.data())})),Object(n.useEffect)((function(){var t={},s=0;Object.keys(e.allPosts).forEach((function(n){e.allPosts[n].user===k&&(t[n]=JSON.parse(JSON.stringify(e.allPosts[n])),s+=e.allPosts[n].likes)}));var n={},r=0;Object.keys(e.allComments).forEach((function(t){e.allComments[t].user===k&&(n[t]=JSON.parse(JSON.stringify(e.allComments[t])),r+=e.allComments[t].likes)})),m(t),O(n),N(s),P(r)}),[k,e.allPosts,e.allComments,e.userRef]),Object(d.jsx)("div",{className:"user-container",children:r&&J||Object(d.jsx)("img",{src:w,alt:"user not found"})})},A=(s(53),function(e){var t=Object(j.g)().group,s=Object(n.useState)([]),r=Object(o.a)(s,2),c=r[0],a=r[1];return Object(n.useEffect)((function(){e.userRef&&a(e.userRef.groups)}),[e.userRef]),Object.keys(e.allGroups).includes(t)||"all"===t?Object(d.jsxs)("div",{className:"group",children:[Object(d.jsx)("h1",{className:"page-title",children:t}),"all"!==t&&(c.includes(t)&&Object(d.jsx)("button",{className:"leave-group-btn",onClick:function(){if(e.userRef){var s=t,n=c;n=n.filter((function(e){return e!==s})),a(n);var r={email:e.userRef.email,displayName:e.userRef.displayName,groups:n,likes:e.userRef.likes,hates:e.userRef.hates};l.a.firestore().collection("users").doc(e.userRef.displayName).set(r),e.setUserRef(r)}else alert("sign in first")},children:"Leave"})||Object(d.jsx)("button",{className:"join-group-btn",onClick:function(){if(e.userRef){var s=t,n=c;n.push(s),a(n);var r={email:e.userRef.email,displayName:e.userRef.displayName,groups:n,likes:e.userRef.likes,hates:e.userRef.hates};l.a.firestore().collection("users").doc(e.userRef.displayName).set(r),e.setUserRef(r)}else alert("sign in first")},children:"Join"})),Object(d.jsx)(k,{group:t,userRef:e.userRef,setUserRef:e.setUserRef,allGroups:e.allGroups,allPosts:e.allPosts,setAllPosts:e.setAllPosts,allComments:e.allComments,setAllComments:e.setAllComments})]}):Object(d.jsx)(j.a,{to:"/404"})}),U=(s(54),function(e){var t=Object(n.useState)({groups:[]}),s=Object(o.a)(t,2),r=s[0],c=s[1],a=Object(n.useState)(!1),i=Object(o.a)(a,2),m=i[0],j=i[1],f=function(t){if(e.userRef){var s=t.target.parentNode.parentNode.dataset.name,n=r.groups;n.push(s),c({groups:n});var a={email:e.userRef.email,displayName:e.userRef.displayName,groups:n,likes:e.userRef.likes,hates:e.userRef.hates};l.a.firestore().collection("users").doc(e.userRef.displayName).set(a),e.setUserRef(a)}else alert("sign in first")},b=function(t){if(e.userRef){var s=t.target.parentNode.parentNode.dataset.name,n=r.groups;n=n.filter((function(e){return e!==s})),c({groups:n});var a={email:e.userRef.email,displayName:e.userRef.displayName,groups:n,likes:e.userRef.likes,hates:e.userRef.hates};l.a.firestore().collection("users").doc(e.userRef.displayName).set(a),e.setUserRef(a)}else alert("sign in first")};return Object(n.useEffect)((function(){e.userRef&&c({groups:e.userRef.groups})}),[e.userRef]),Object(d.jsxs)("div",{className:"groups-container",children:[Object(d.jsx)("div",{className:"page-title",children:"GROUPS"}),Object(d.jsxs)("div",{className:"list-container",children:[Object(d.jsx)("ul",{className:"groups-list",children:Object.keys(e.allGroups).map((function(t){return Object(d.jsxs)("li",{"data-name":t,className:"group-item",children:[Object(d.jsxs)("div",{className:"group-header",children:[r.groups.includes(t)&&Object(d.jsx)("button",{className:"leave-group-btn",onClick:b,children:"Leave"})||Object(d.jsx)("button",{className:"join-group-btn",onClick:f,children:"Join"}),Object(d.jsx)(u.b,{to:"/groups/".concat(t),children:t})]}),Object(d.jsx)("div",{className:"group-description",children:e.allGroups[t].description})]},t)}))}),Object(d.jsx)("div",{className:"right-column",children:e.userRef&&Object(d.jsx)("button",{className:"create-group-btn",onClick:function(){j(!0)},children:"Create your own group"})})]}),m&&Object(d.jsxs)("form",{className:"create-group-form",onSubmit:function(t){t.preventDefault();var s=t.target[0].value.toLowerCase(),n=t.target[1].value;Object.keys(e.allGroups).includes(s)?document.querySelector(".warning").textContent="Group already exists":s.includes(" ")?document.querySelector(".warning").textContent="No spaces allowed in name":l.a.firestore().collection("groups").doc(s).set({description:n}).then((function(){j(!1),e.setAllGroups((function(e){return Object(h.a)(Object(h.a)({},e),{},Object(O.a)({},s,{description:n}))}))}))},children:[Object(d.jsx)("div",{onClick:function(){j(!1)},className:"close-form",children:"X"}),Object(d.jsx)("h1",{children:"Create your group"}),Object(d.jsxs)("div",{children:[Object(d.jsx)("div",{className:"warning"}),Object(d.jsx)("label",{children:"Group name"}),Object(d.jsx)("input",{required:!0,maxLength:"20",placeholder:"Group name..."})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{children:"Group description"}),Object(d.jsx)("textarea",{required:!0,minLength:"5",maxLength:"150",placeholder:"Enter description"})]}),Object(d.jsx)("button",{children:"submit"})]})]})}),E=(s(55),function(){return Object(d.jsx)("img",{className:"error-image",src:w,alt:"404 error"})});var q=function(){var e;e=sessionStorage.length<1?null:JSON.parse(sessionStorage[Object.keys(sessionStorage)[0]]);var t=Object(n.useState)(e),s=Object(o.a)(t,2),r=s[0],c=s[1],a=Object(n.useState)(null),i=Object(o.a)(a,2),b=i[0],O=i[1],h=Object(n.useState)({}),g=Object(o.a)(h,2),x=g[0],N=g[1],v=Object(n.useState)({}),R=Object(o.a)(v,2),y=R[0],S=R[1],C=Object(n.useState)({}),P=Object(o.a)(C,2),w=P[0],q=P[1];return Object(n.useEffect)((function(){r&&l.a.firestore().collection("users").doc(r.displayName).get().then((function(e){O(e.data())}))}),[r]),Object(n.useEffect)((function(){var e={},t={},s={};l.a.firestore().collection("posts").get().then((function(t){t.forEach((function(t){e[t.id]=t.data()})),N(e)})),l.a.firestore().collection("comments").get().then((function(e){e.forEach((function(e){t[e.id]=e.data()})),q(t)})),l.a.firestore().collection("groups").get().then((function(e){e.forEach((function(e){s[e.id]={description:e.data().description}})),S(s)}))}),[]),Object(d.jsx)("div",{className:"App",children:Object(d.jsxs)(u.a,{basename:"/react-gh-pages",children:[Object(d.jsx)(m,{user:r,setUser:c,userRef:b}),Object(d.jsxs)(j.d,{children:[Object(d.jsx)(j.b,{exact:!0,path:"/",render:function(){return Object(d.jsx)(k,{userRef:b,setUserRef:O,allPosts:x,setAllPosts:N,allGroups:y,allComments:w,setAllComments:q})}}),Object(d.jsx)(j.b,{exact:!0,path:"/login",render:function(){return Object(d.jsx)(f,{user:r,setUser:c})}}),Object(d.jsx)(j.b,{exact:!0,path:"/signup",render:function(){return Object(d.jsx)(p,{user:r,setUser:c,setUserRef:O})}}),Object(d.jsx)(j.b,{exact:!0,path:"/user/:name",render:function(){return Object(d.jsx)(J,{userRef:b,setUserRef:O,allPosts:x,setAllPosts:N,allComments:w,setAllComments:q})}}),Object(d.jsx)(j.b,{exact:!0,path:"/groups/:group",render:function(){return Object(d.jsx)(A,{userRef:b,setUserRef:O,allGroups:y,allPosts:x,setAllPosts:N,allComments:w,setAllComments:q})}}),Object(d.jsx)(j.b,{exact:!0,path:"/groups",render:function(){return Object(d.jsx)(U,{userRef:b,setUserRef:O,allGroups:y,setAllGroups:S})}}),Object(d.jsx)(j.b,{path:"*",render:function(){return Object(d.jsx)(E,{})}})]})]})})};l.a.initializeApp({apiKey:"AIzaSyDrSeIcoMoV-mP6jJy_j0oOIueeaEmTLbQ",authDomain:"readit-c4bfd.firebaseapp.com",projectId:"readit-c4bfd",storageBucket:"readit-c4bfd.appspot.com",messagingSenderId:"684668365048",appId:"1:684668365048:web:6d6c902edc5fbb1aaf730d"}),a.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(q,{})}),document.getElementById("root"))}},[[56,1,2]]]);
//# sourceMappingURL=main.e1fbc195.chunk.js.map